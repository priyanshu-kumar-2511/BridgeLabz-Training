====================================================
/*1. Patient Management

UC-1.1: Register New Patient
Actor: Receptionist
Flow: Enter patient details (name, DOB, contact, address, blood group). System validates uniqueness by phone/email, generates patient ID, inserts record into patients table with auto-increment primary key.

UC-1.2: Update Patient Information
Actor: Receptionist
Flow: Search patient by ID/phone, display current details, update fields, execute SQL UPDATE with WHERE clause on patient ID.

UC-1.3: Search Patient Records
Actor: Receptionist/Doctor
Flow: Query patients table using LIKE operator for name search or exact match for ID/phone. Display results using ResultSet iteration.

UC-1.4: View Patient Visit History
Actor: Doctor/Receptionist
Flow: Execute JOIN query between appointments and visits tables filtered by patient ID. Display chronological list with doctor names and diagnoses.*/
====================================================

----------- CREATE PATIENTS MANAGEMENT -------------

mysql> CREATE DATABASE patient_management;
Query OK, 1 row affected (0.01 sec)

------------- USE PATIENTS MANAGEMENT --------------

mysql> USE patient_management;
Database changed

-------------- CREATE PATIENTS TABLE ---------------

mysql> CREATE TABLE patients (
    -> patient_id INT PRIMARY KEY AUTO_INCREMENT,
    -> name VARCHAR(100) NOT NULL,
    -> dob DATE NOT NULL,
    -> contact VARCHAR(15) UNIQUE NOT NULL,
    -> email VARCHAR(255) UNIQUE NOT NULL,
    -> address VARCHAR(300) NOT NULL,
    -> blood_group VARCHAR(5) NOT NULL
    -> );
Query OK, 0 rows affected (0.05 sec)

--------------- DESCRIBE PATIENTS TABLE ------------

mysql> desc patients ;
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| patient_id  | int          | NO   | PRI | NULL    | auto_increment |
| name        | varchar(100) | NO   |     | NULL    |                |
| dob         | date         | NO   |     | NULL    |                |
| contact     | varchar(15)  | NO   | UNI | NULL    |                |
| email       | varchar(255) | NO   | UNI | NULL    |                |
| address     | varchar(300) | NO   |     | NULL    |                |
| blood_group | varchar(5)   | NO   |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

-------------- INSERT PATIENTS DATA --------------

mysql> INSERT INTO patients (name, dob, contact, email, address, blood_group)
    -> VALUES ('Priyanshu Kumar', '2005-11-25', '6207394439', 'kumarpriyanshu77828@gmail.com', 'Bhopal, Madhya Pradesh', 'A+'),
    -> ('Ankesh Kumar', '2005-11-15', '6207934439', 'ankeshkrgupta@gmail.com', 'Katni, Madhya Pradesh', 'A+')
Query OK, 2 row affected (0.01 sec)

-------------- CHECKING PATIENTS DATA -----------

mysql> SELECT * FROM patients;
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
| patient_id | name            | dob        | contact    | email                         | address                | blood_group |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
|          1 | Priyanshu Kumar | 2005-11-25 | 6207394439 | kumarpriyanshu77828@gmail.com | Bhopal, Madhya Pradesh | A+          |
|          2 | Ankesh Kumar    | 2005-11-15 | 6207934439 | ankeshkrgupta@gmail.com       | Katni, Madhya Pradesh  | A+          |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
2 rows in set (0.00 sec)

-------------- UPADTE DATA IN PATIENTS ----------

mysql> UPDATE patients
    -> SET blood_group = 'B+'
    -> WHERE patient_id = 2;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

------------ SERACH BY LIKE OPERATOR ------------

mysql> SELECT * FROM patients
    -> WHERE name LIKE '%Pri%';
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
| patient_id | name            | dob        | contact    | email                         | address                | blood_group |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
|          1 | Priyanshu Kumar | 2005-11-25 | 6207394439 | kumarpriyanshu77828@gmail.com | Bhopal, Madhya Pradesh | A+          |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
1 row in set (0.00 sec)

------- SEARCH BY USING WHERE patient_id --------

mysql> SELECT * FROM patients
    -> WHERE patient_id = 1;
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
| patient_id | name            | dob        | contact    | email                         | address                | blood_group |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
|          1 | Priyanshu Kumar | 2005-11-25 | 6207394439 | kumarpriyanshu77828@gmail.com | Bhopal, Madhya Pradesh | +A          |
+------------+-----------------+------------+------------+-------------------------------+------------------------+-------------+
1 row in set (0.00 sec)

----------- CREATE APPOINTMENTS TABLE ------------

mysql> CREATE TABLE appointments (
    -> appointment_id INT PRIMARY KEY AUTO_INCREMENT,
    -> patient_id INT NOT NULL,
    -> doctor_name VARCHAR(100) NOT NULL,
    -> appointment_date DATE NOT NULL,
    -> FOREIGN KEY (patient_id) REFERENCES patients(patient_id)
    -> );
Query OK, 0 rows affected (0.04 sec)

---------- DESCRIBE APPOINTMENTS TABLE -----------

mysql> desc appointments;
+------------------+--------------+------+-----+---------+----------------+
| Field            | Type         | Null | Key | Default | Extra          |
+------------------+--------------+------+-----+---------+----------------+
| appointment_id   | int          | NO   | PRI | NULL    | auto_increment |
| patient_id       | int          | NO   | MUL | NULL    |                |
| doctor_name      | varchar(100) | NO   |     | NULL    |                |
| appointment_date | date         | NO   |     | NULL    |                |
+------------------+--------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)

------ INSERT VALUES IN APPOINTMENTS TABLE ------

mysql> INSERT INTO appointments (patient_id, doctor_name, appointment_date)
    -> VALUES (1, 'Dr AK Singh', '2026-01-10'),
    -> VALUES (2, 'Dr RK Saha', '2026-01-12');
Query OK, 2 row affected (0.01 sec)

------ CHECKING DATA IN APPOINTMENTS TABLE ------

mysql> SELECT * FROM appointments;
+----------------+------------+-------------+------------------+
| appointment_id | patient_id | doctor_name | appointment_date |
+----------------+------------+-------------+------------------+
|              1 |          1 | Dr AK Singh | 2026-01-10       |
|              2 |          2 | Dr RK Saha  | 2026-01-12       |
+----------------+------------+-------------+------------------+
2 rows in set (0.01 sec)

------------- CREATE VISITS TABLE ---------------

mysql> CREATE TABLE visits (
    -> visit_id INT PRIMARY KEY AUTO_INCREMENT,
    -> appointment_id INT NOT NULL,
    -> diagnose VARCHAR(100) NOT NULL,
    -> visit_date DATE NOT NULL,
    -> FOREIGN KEY (appointment_id) REFERENCES appointments(appointment_id)
    -> );
Query OK, 0 rows affected (0.04 sec)

------------ DESCRIBE VISITS TABLE --------------

mysql> desc visits;
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| visit_id       | int          | NO   | PRI | NULL    | auto_increment |
| appointment_id | int          | NO   | MUL | NULL    |                |
| diagnose       | varchar(100) | NO   |     | NULL    |                |
| visit_date     | date         | NO   |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+
4 rows in set (0.00 sec)

--------- INSERT VALUES IN VISITS TABLE ---------

mysql> INSERT INTO visits (appointment_id, diagnose, visit_date)
    -> VALUES (1, 'Fever', '2026-01-10');
Query OK, 1 row affected (0.01 sec)

-------- CHECKING DATA IN VISITS TABLE ----------

mysql> SELECT * FROM visits;
+----------+----------------+----------+------------+
| visit_id | appointment_id | diagnose | visit_date |
+----------+----------------+----------+------------+
|        1 |              1 | Fever    | 2026-01-10 |
+----------+----------------+----------+------------+
1 row in set (0.00 sec)

--------- VIEW PATIENT VISIT HISTORY ------------

mysql> SELECT
    ->     p.name,
    ->     a.doctor_name,
    ->     v.diagnose,
    ->     v.visit_date
    -> FROM visits v
    -> JOIN appointments a ON v.appointment_id = a.appointment_id
    -> JOIN patients p ON a.patient_id = p.patient_id
    -> WHERE p.patient_id = 1
    -> ORDER BY v.visit_date;
    
+-----------------+-------------+----------+------------+
| name            | doctor_name | diagnose | visit_date |
+-----------------+-------------+----------+------------+
| Priyanshu Kumar | Dr AK Singh | Fever    | 2026-01-10 |
+-----------------+-------------+----------+------------+
1 row in set (0.00 sec)

